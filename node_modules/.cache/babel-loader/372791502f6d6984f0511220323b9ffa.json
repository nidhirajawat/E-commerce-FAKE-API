{"ast":null,"code":"var _jsxFileName = \"/home/developer/Desktop/Precious Infosystem/E-commerce-FAKE-APi/src/contexts/filter_context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useReducer } from \"react\";\nimport { CLEAR_FILTERS, FILTER_PRODUCTS, UPDATE_SORT, LOAD_PRODUCTS, SET_GRID_VIEW, SET_LIST_VIEW, SORT_PRODUCTS, UPDATE_FILTERS } from \"../utils/actions\";\nimport { filter_reducer as reducer } from \"../reducers/filter_reducer\";\nimport { useProductsContext } from \"./products_context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  filtered_products: [],\n  all_products: [],\n  grid_view: true,\n  sort: \"price-lowest\",\n  filters: {\n    text: \"\",\n    category: \"all\",\n    min_price: 0,\n    price: 0,\n    max_price: 0\n  }\n};\nconst FilterContext = /*#__PURE__*/createContext();\nexport const FilterProvider = ({\n  children\n}) => {\n  _s();\n  const {\n    products\n  } = useProductsContext();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    dispatch({\n      type: LOAD_PRODUCTS,\n      payload: products\n    });\n  }, [products]);\n  useEffect(() => {\n    dispatch({\n      type: FILTER_PRODUCTS\n    });\n    dispatch({\n      type: SORT_PRODUCTS\n    });\n  }, [products, state.sort, state.filters]);\n\n  //? Handlers\n  const setGridView = () => {\n    dispatch({\n      type: SET_GRID_VIEW\n    });\n  };\n  const setListView = () => {\n    dispatch({\n      type: SET_LIST_VIEW\n    });\n  };\n  const updateSort = e => {\n    const value = e.target.value;\n    dispatch({\n      type: UPDATE_SORT,\n      payload: value\n    });\n  };\n  const updateFilters = e => {\n    let name = e.target.name;\n    let value = e.target.value;\n    console.log({\n      name,\n      value\n    });\n    if (name === \"category\") {\n      value = e.target.dataset.category;\n    }\n    if (name === \"price\") {\n      value = Number(value);\n    }\n    dispatch({\n      type: UPDATE_FILTERS,\n      payload: {\n        name,\n        value\n      }\n    });\n  };\n  const clearFilters = () => {\n    dispatch({\n      type: CLEAR_FILTERS\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(FilterContext.Provider, {\n    value: {\n      ...state,\n      setGridView,\n      setListView,\n      updateSort,\n      updateFilters,\n      clearFilters\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(FilterProvider, \"8cAveOIhpTlV5n6mdVb22DSUbYQ=\", false, function () {\n  return [useProductsContext];\n});\n_c = FilterProvider;\nexport const useFilterContext = () => {\n  _s2();\n  return useContext(FilterContext);\n};\n_s2(useFilterContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"FilterProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","CLEAR_FILTERS","FILTER_PRODUCTS","UPDATE_SORT","LOAD_PRODUCTS","SET_GRID_VIEW","SET_LIST_VIEW","SORT_PRODUCTS","UPDATE_FILTERS","filter_reducer","reducer","useProductsContext","jsxDEV","_jsxDEV","initialState","filtered_products","all_products","grid_view","sort","filters","text","category","min_price","price","max_price","FilterContext","FilterProvider","children","_s","products","state","dispatch","type","payload","setGridView","setListView","updateSort","e","value","target","updateFilters","name","console","log","dataset","Number","clearFilters","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useFilterContext","_s2","$RefreshReg$"],"sources":["/home/developer/Desktop/Precious Infosystem/E-commerce-FAKE-APi/src/contexts/filter_context.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from \"react\";\r\n\r\nimport {\r\n  CLEAR_FILTERS,\r\n  FILTER_PRODUCTS,\r\n  UPDATE_SORT,\r\n  LOAD_PRODUCTS,\r\n  SET_GRID_VIEW,\r\n  SET_LIST_VIEW,\r\n  SORT_PRODUCTS,\r\n  UPDATE_FILTERS,\r\n} from \"../utils/actions\";\r\nimport { filter_reducer as reducer } from \"../reducers/filter_reducer\";\r\n\r\nimport { useProductsContext } from \"./products_context\";\r\n\r\nconst initialState = {\r\n  filtered_products: [],\r\n  all_products: [],\r\n  grid_view: true,\r\n  sort: \"price-lowest\",\r\n  filters: {\r\n    text: \"\",\r\n    category: \"all\",\r\n    min_price: 0,\r\n    price: 0,\r\n    max_price: 0,\r\n  },\r\n};\r\n\r\nconst FilterContext = createContext();\r\n\r\nexport const FilterProvider = ({ children }) => {\r\n  const { products } = useProductsContext();\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: LOAD_PRODUCTS, payload: products });\r\n  }, [products]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: FILTER_PRODUCTS });\r\n    dispatch({ type: SORT_PRODUCTS });\r\n  }, [products, state.sort, state.filters]);\r\n\r\n  //? Handlers\r\n  const setGridView = () => {\r\n    dispatch({ type: SET_GRID_VIEW });\r\n  };\r\n  const setListView = () => {\r\n    dispatch({ type: SET_LIST_VIEW });\r\n  };\r\n  const updateSort = (e) => {\r\n    const value = e.target.value;\r\n    dispatch({ type: UPDATE_SORT, payload: value });\r\n  };\r\n  const updateFilters = (e) => {\r\n    let name = e.target.name;\r\n    let value = e.target.value;\r\n    console.log({ name, value });\r\n    if (name === \"category\") {\r\n      value = e.target.dataset.category;\r\n    }\r\n    if (name === \"price\") {\r\n      value = Number(value);\r\n    }\r\n    dispatch({ type: UPDATE_FILTERS, payload: { name, value } });\r\n  };\r\n  const clearFilters = () => {\r\n    dispatch({ type: CLEAR_FILTERS });\r\n  };\r\n  return (\r\n    <FilterContext.Provider\r\n      value={{\r\n        ...state,\r\n        setGridView,\r\n        setListView,\r\n        updateSort,\r\n        updateFilters,\r\n        clearFilters,\r\n      }}\r\n    >\r\n      {children}\r\n    </FilterContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFilterContext = () => {\r\n  return useContext(FilterContext);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}