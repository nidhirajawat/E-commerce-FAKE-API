{"ast":null,"code":"import React,{createContext,useContext,useEffect,useReducer}from\"react\";import{CLEAR_FILTERS,FILTER_PRODUCTS,UPDATE_SORT,LOAD_PRODUCTS,SET_GRID_VIEW,SET_LIST_VIEW,SORT_PRODUCTS,UPDATE_FILTERS}from\"../utils/actions\";import{filter_reducer as reducer}from\"../reducers/filter_reducer\";import{useProductsContext}from\"./products_context\";import{jsx as _jsx}from\"react/jsx-runtime\";const initialState={filtered_products:[],all_products:[],grid_view:true,sort:\"price-lowest\",filters:{text:\"\",category:\"all\",min_price:0,price:0,max_price:0}};const FilterContext=/*#__PURE__*/createContext();export const FilterProvider=_ref=>{let{children}=_ref;const{products}=useProductsContext();const[state,dispatch]=useReducer(reducer,initialState);useEffect(()=>{dispatch({type:LOAD_PRODUCTS,payload:products});},[products]);useEffect(()=>{dispatch({type:FILTER_PRODUCTS});dispatch({type:SORT_PRODUCTS});},[products,state.sort,state.filters]);//? Handlers\nconst setGridView=()=>{dispatch({type:SET_GRID_VIEW});};const setListView=()=>{dispatch({type:SET_LIST_VIEW});};const updateSort=e=>{const value=e.target.value;dispatch({type:UPDATE_SORT,payload:value});};const updateFilters=e=>{let name=e.target.name;let value=e.target.value;console.log({name,value});if(name===\"category\"){value=e.target.dataset.category;}if(name===\"price\"){value=Number(value);}dispatch({type:UPDATE_FILTERS,payload:{name,value}});};const clearFilters=()=>{dispatch({type:CLEAR_FILTERS});};return/*#__PURE__*/_jsx(FilterContext.Provider,{value:{...state,setGridView,setListView,updateSort,updateFilters,clearFilters},children:children});};export const useFilterContext=()=>{return useContext(FilterContext);};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","CLEAR_FILTERS","FILTER_PRODUCTS","UPDATE_SORT","LOAD_PRODUCTS","SET_GRID_VIEW","SET_LIST_VIEW","SORT_PRODUCTS","UPDATE_FILTERS","filter_reducer","reducer","useProductsContext","jsx","_jsx","initialState","filtered_products","all_products","grid_view","sort","filters","text","category","min_price","price","max_price","FilterContext","FilterProvider","_ref","children","products","state","dispatch","type","payload","setGridView","setListView","updateSort","e","value","target","updateFilters","name","console","log","dataset","Number","clearFilters","Provider","useFilterContext"],"sources":["/home/developer/Desktop/Precious Infosystem/E-commerce-FAKE-APi/src/contexts/filter_context.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from \"react\";\r\n\r\nimport {\r\n  CLEAR_FILTERS,\r\n  FILTER_PRODUCTS,\r\n  UPDATE_SORT,\r\n  LOAD_PRODUCTS,\r\n  SET_GRID_VIEW,\r\n  SET_LIST_VIEW,\r\n  SORT_PRODUCTS,\r\n  UPDATE_FILTERS,\r\n} from \"../utils/actions\";\r\nimport { filter_reducer as reducer } from \"../reducers/filter_reducer\";\r\n\r\nimport { useProductsContext } from \"./products_context\";\r\n\r\nconst initialState = {\r\n  filtered_products: [],\r\n  all_products: [],\r\n  grid_view: true,\r\n  sort: \"price-lowest\",\r\n  filters: {\r\n    text: \"\",\r\n    category: \"all\",\r\n    min_price: 0,\r\n    price: 0,\r\n    max_price: 0,\r\n  },\r\n};\r\n\r\nconst FilterContext = createContext();\r\n\r\nexport const FilterProvider = ({ children }) => {\r\n  const { products } = useProductsContext();\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: LOAD_PRODUCTS, payload: products });\r\n  }, [products]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: FILTER_PRODUCTS });\r\n    dispatch({ type: SORT_PRODUCTS });\r\n  }, [products, state.sort, state.filters]);\r\n\r\n  //? Handlers\r\n  const setGridView = () => {\r\n    dispatch({ type: SET_GRID_VIEW });\r\n  };\r\n  const setListView = () => {\r\n    dispatch({ type: SET_LIST_VIEW });\r\n  };\r\n  const updateSort = (e) => {\r\n    const value = e.target.value;\r\n    dispatch({ type: UPDATE_SORT, payload: value });\r\n  };\r\n  const updateFilters = (e) => {\r\n    let name = e.target.name;\r\n    let value = e.target.value;\r\n    console.log({ name, value });\r\n    if (name === \"category\") {\r\n      value = e.target.dataset.category;\r\n    }\r\n    if (name === \"price\") {\r\n      value = Number(value);\r\n    }\r\n    dispatch({ type: UPDATE_FILTERS, payload: { name, value } });\r\n  };\r\n  const clearFilters = () => {\r\n    dispatch({ type: CLEAR_FILTERS });\r\n  };\r\n  return (\r\n    <FilterContext.Provider\r\n      value={{\r\n        ...state,\r\n        setGridView,\r\n        setListView,\r\n        updateSort,\r\n        updateFilters,\r\n        clearFilters,\r\n      }}\r\n    >\r\n      {children}\r\n    </FilterContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useFilterContext = () => {\r\n  return useContext(FilterContext);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}