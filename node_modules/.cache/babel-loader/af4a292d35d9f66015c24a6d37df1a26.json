{"ast":null,"code":"import{CLEAR_FILTERS,FILTER_PRODUCTS,UPDATE_SORT,LOAD_PRODUCTS,SET_GRID_VIEW,SORT_PRODUCTS,UPDATE_FILTERS,SET_LIST_VIEW}from\"../utils/actions\";export const filter_reducer=(state,action)=>{const{type,payload}=action;if(type===LOAD_PRODUCTS){let maxPrice=payload.map(product=>product.price);maxPrice=Math.max(...maxPrice);return{...state,all_products:[...payload],filtered_products:[...payload],filters:{...state.filters,max_price:maxPrice,price:maxPrice}};}if(type===SET_GRID_VIEW){return{...state,grid_view:true};}if(type===SET_LIST_VIEW){return{...state,grid_view:false};}if(type===UPDATE_SORT){return{...state,sort:payload};}if(type===SORT_PRODUCTS){const{sort,filtered_products}=state;let tempProducts=[...filtered_products];if(sort===\"price-lowest\"){tempProducts=tempProducts.sort((a,b)=>a.price-b.price);}if(sort===\"price-highest\"){tempProducts=tempProducts.sort((a,b)=>b.price-a.price);}if(sort===\"name-a\"){tempProducts=tempProducts.sort((a,b)=>{return a.title.localeCompare(b.title);});}if(sort===\"name-z\"){tempProducts=tempProducts.sort((a,b)=>{return b.title.localeCompare(a.title);});}return{...state,filtered_products:tempProducts};}if(type===UPDATE_FILTERS){const{name,value}=payload;return{...state,filters:{...state.filters,[name]:value}};}if(type===FILTER_PRODUCTS){const{all_products}=state;const{text,category,price}=state.filters;let tempProducts=[...all_products];if(text){tempProducts=tempProducts.filter(product=>product.title.toLowerCase().includes(text));}if(category!==\"all\"){tempProducts=tempProducts.filter(product=>product.category===category);}tempProducts=tempProducts.filter(product=>product.price<=price);return{...state,filtered_products:tempProducts};}if(type===CLEAR_FILTERS){return{...state,filters:{...state.filters,text:\"\",category:\"all\",price:state.filters.max_price}};}throw new Error(`No Matching \"${type}\" - action type `);};","map":{"version":3,"names":["CLEAR_FILTERS","FILTER_PRODUCTS","UPDATE_SORT","LOAD_PRODUCTS","SET_GRID_VIEW","SORT_PRODUCTS","UPDATE_FILTERS","SET_LIST_VIEW","filter_reducer","state","action","type","payload","maxPrice","map","product","price","Math","max","all_products","filtered_products","filters","max_price","grid_view","sort","tempProducts","a","b","title","localeCompare","name","value","text","category","filter","toLowerCase","includes","Error"],"sources":["/home/developer/Desktop/Precious Infosystem/E-commerce-FAKE-APi/src/reducers/filter_reducer.js"],"sourcesContent":["import {\r\n  CLEAR_FILTERS,\r\n  FILTER_PRODUCTS,\r\n  UPDATE_SORT,\r\n  LOAD_PRODUCTS,\r\n  SET_GRID_VIEW,\r\n  SORT_PRODUCTS,\r\n  UPDATE_FILTERS,\r\n  SET_LIST_VIEW,\r\n} from \"../utils/actions\";\r\n\r\nexport const filter_reducer = (state, action) => {\r\n  const { type, payload } = action;\r\n\r\n  if (type === LOAD_PRODUCTS) {\r\n    let maxPrice = payload.map((product) => product.price);\r\n    maxPrice = Math.max(...maxPrice);\r\n\r\n    return {\r\n      ...state,\r\n      all_products: [...payload],\r\n      filtered_products: [...payload],\r\n      filters: { ...state.filters, max_price: maxPrice, price: maxPrice },\r\n    };\r\n  }\r\n\r\n  if (type === SET_GRID_VIEW) {\r\n    return { ...state, grid_view: true };\r\n  }\r\n  if (type === SET_LIST_VIEW) {\r\n    return { ...state, grid_view: false };\r\n  }\r\n\r\n  if (type === UPDATE_SORT) {\r\n    return { ...state, sort: payload };\r\n  }\r\n\r\n  if (type === SORT_PRODUCTS) {\r\n    const { sort, filtered_products } = state;\r\n    let tempProducts = [...filtered_products];\r\n    if (sort === \"price-lowest\") {\r\n      tempProducts = tempProducts.sort((a, b) => a.price - b.price);\r\n    }\r\n    if (sort === \"price-highest\") {\r\n      tempProducts = tempProducts.sort((a, b) => b.price - a.price);\r\n    }\r\n    if (sort === \"name-a\") {\r\n      tempProducts = tempProducts.sort((a, b) => {\r\n        return a.title.localeCompare(b.title);\r\n      });\r\n    }\r\n    if (sort === \"name-z\") {\r\n      tempProducts = tempProducts.sort((a, b) => {\r\n        return b.title.localeCompare(a.title);\r\n      });\r\n    }\r\n\r\n    return { ...state, filtered_products: tempProducts };\r\n  }\r\n\r\n  if (type === UPDATE_FILTERS) {\r\n    const { name, value } = payload;\r\n    return { ...state, filters: { ...state.filters, [name]: value } };\r\n  }\r\n\r\n  if (type === FILTER_PRODUCTS) {\r\n    const { all_products } = state;\r\n    const { text, category, price } = state.filters;\r\n    let tempProducts = [...all_products];\r\n\r\n    if (text) {\r\n      tempProducts = tempProducts.filter((product) =>\r\n        product.title.toLowerCase().includes(text)\r\n      );\r\n    }\r\n\r\n    if (category !== \"all\") {\r\n      tempProducts = tempProducts.filter(\r\n        (product) => product.category === category\r\n      );\r\n    }\r\n\r\n    tempProducts = tempProducts.filter((product) => product.price <= price);\r\n\r\n    return { ...state, filtered_products: tempProducts };\r\n  }\r\n\r\n  if (type === CLEAR_FILTERS) {\r\n    return {\r\n      ...state,\r\n      filters: {\r\n        ...state.filters,\r\n        text: \"\",\r\n        category: \"all\",\r\n        price: state.filters.max_price,\r\n      },\r\n    };\r\n  }\r\n\r\n  throw new Error(`No Matching \"${type}\" - action type `);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}