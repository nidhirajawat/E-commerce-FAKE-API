{"ast":null,"code":"import React,{createContext,useContext,useEffect,useReducer}from\"react\";import{cart_reducer as reducer}from\"../reducers/cart_reducer\";import{ADD_TO_CART,REMOVE_CART_ITEM,TOGGLE_CART_ITEM,CLEAR_CART,COUNT_CART_TOTALS,CHECKOUT}from\"../utils/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";const getLocalStorage=()=>{let cart=localStorage.getItem(\"cart\");if(cart){return JSON.parse(cart);}else{return[];}};const initialState={cart:getLocalStorage(),total_price:0,total_items:0,isCheckout:false};const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(reducer,initialState);useEffect(()=>{dispatch({type:COUNT_CART_TOTALS});localStorage.setItem(\"cart\",JSON.stringify(state.cart));},[state.cart]);//? Handlers\nconst addToCart=(product,amount)=>{dispatch({type:ADD_TO_CART,payload:{product,amount}});};const toggleAmount=(id,value)=>{dispatch({type:TOGGLE_CART_ITEM,payload:{id,value}});};const removeItem=id=>{dispatch({type:REMOVE_CART_ITEM,payload:id});};const clearCart=()=>{dispatch({type:CLEAR_CART});};const checkout=()=>{dispatch({type:CHECKOUT});};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{...state,addToCart,toggleAmount,removeItem,clearCart,checkout},children:children});};export const useCartContext=()=>{return useContext(CartContext);};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","cart_reducer","reducer","ADD_TO_CART","REMOVE_CART_ITEM","TOGGLE_CART_ITEM","CLEAR_CART","COUNT_CART_TOTALS","CHECKOUT","jsx","_jsx","getLocalStorage","cart","localStorage","getItem","JSON","parse","initialState","total_price","total_items","isCheckout","CartContext","CartProvider","_ref","children","state","dispatch","type","setItem","stringify","addToCart","product","amount","payload","toggleAmount","id","value","removeItem","clearCart","checkout","Provider","useCartContext"],"sources":["/home/developer/Desktop/Precious Infosystem/E-commerce-FAKE-APi/src/contexts/cart_context.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from \"react\";\r\nimport { cart_reducer as reducer } from \"../reducers/cart_reducer\";\r\n\r\nimport {\r\n  ADD_TO_CART,\r\n  REMOVE_CART_ITEM,\r\n  TOGGLE_CART_ITEM,\r\n  CLEAR_CART,\r\n  COUNT_CART_TOTALS,\r\n  CHECKOUT,\r\n} from \"../utils/actions\";\r\n\r\nconst getLocalStorage = () => {\r\n  let cart = localStorage.getItem(\"cart\");\r\n  if (cart) {\r\n    return JSON.parse(cart);\r\n  } else {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  cart: getLocalStorage(),\r\n  total_price: 0,\r\n  total_items: 0,\r\n  isCheckout: false,\r\n};\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: COUNT_CART_TOTALS });\r\n    localStorage.setItem(\"cart\", JSON.stringify(state.cart));\r\n  }, [state.cart]);\r\n\r\n  //? Handlers\r\n  const addToCart = (product, amount) => {\r\n    dispatch({ type: ADD_TO_CART, payload: { product, amount } });\r\n  };\r\n\r\n  const toggleAmount = (id, value) => {\r\n    dispatch({ type: TOGGLE_CART_ITEM, payload: { id, value } });\r\n  };\r\n\r\n  const removeItem = (id) => {\r\n    dispatch({ type: REMOVE_CART_ITEM, payload: id });\r\n  };\r\n\r\n  const clearCart = () => {\r\n    dispatch({ type: CLEAR_CART });\r\n  };\r\n\r\n  const checkout = () => {\r\n    dispatch({ type: CHECKOUT });\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        ...state,\r\n        addToCart,\r\n        toggleAmount,\r\n        removeItem,\r\n        clearCart,\r\n        checkout,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCartContext = () => {\r\n  return useContext(CartContext);\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC/E,OAASC,YAAY,GAAI,CAAAC,OAAO,KAAQ,0BAA0B,CAElE,OACEC,WAAW,CACXC,gBAAgB,CAChBC,gBAAgB,CAChBC,UAAU,CACVC,iBAAiB,CACjBC,QAAQ,KACH,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAAAC,IAAI,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACvC,GAAIF,IAAI,CAAE,CACR,MAAO,CAAAG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC,CACzB,CAAC,IAAM,CACL,MAAO,EAAE,CACX,CACF,CAAC,CAED,KAAM,CAAAK,YAAY,CAAG,CACnBL,IAAI,CAAED,eAAe,CAAC,CAAC,CACvBO,WAAW,CAAE,CAAC,CACdC,WAAW,CAAE,CAAC,CACdC,UAAU,CAAE,KACd,CAAC,CAED,KAAM,CAAAC,WAAW,cAAGxB,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAyB,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAG1B,UAAU,CAACE,OAAO,CAAEe,YAAY,CAAC,CAE3DlB,SAAS,CAAC,IAAM,CACd2B,QAAQ,CAAC,CAAEC,IAAI,CAAEpB,iBAAkB,CAAC,CAAC,CACrCM,YAAY,CAACe,OAAO,CAAC,MAAM,CAAEb,IAAI,CAACc,SAAS,CAACJ,KAAK,CAACb,IAAI,CAAC,CAAC,CAC1D,CAAC,CAAE,CAACa,KAAK,CAACb,IAAI,CAAC,CAAC,CAEhB;AACA,KAAM,CAAAkB,SAAS,CAAGA,CAACC,OAAO,CAAEC,MAAM,GAAK,CACrCN,QAAQ,CAAC,CAAEC,IAAI,CAAExB,WAAW,CAAE8B,OAAO,CAAE,CAAEF,OAAO,CAAEC,MAAO,CAAE,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAE,YAAY,CAAGA,CAACC,EAAE,CAAEC,KAAK,GAAK,CAClCV,QAAQ,CAAC,CAAEC,IAAI,CAAEtB,gBAAgB,CAAE4B,OAAO,CAAE,CAAEE,EAAE,CAAEC,KAAM,CAAE,CAAC,CAAC,CAC9D,CAAC,CAED,KAAM,CAAAC,UAAU,CAAIF,EAAE,EAAK,CACzBT,QAAQ,CAAC,CAAEC,IAAI,CAAEvB,gBAAgB,CAAE6B,OAAO,CAAEE,EAAG,CAAC,CAAC,CACnD,CAAC,CAED,KAAM,CAAAG,SAAS,CAAGA,CAAA,GAAM,CACtBZ,QAAQ,CAAC,CAAEC,IAAI,CAAErB,UAAW,CAAC,CAAC,CAChC,CAAC,CAED,KAAM,CAAAiC,QAAQ,CAAGA,CAAA,GAAM,CACrBb,QAAQ,CAAC,CAAEC,IAAI,CAAEnB,QAAS,CAAC,CAAC,CAC9B,CAAC,CAED,mBACEE,IAAA,CAACW,WAAW,CAACmB,QAAQ,EACnBJ,KAAK,CAAE,CACL,GAAGX,KAAK,CACRK,SAAS,CACTI,YAAY,CACZG,UAAU,CACVC,SAAS,CACTC,QACF,CAAE,CAAAf,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAiB,cAAc,CAAGA,CAAA,GAAM,CAClC,MAAO,CAAA3C,UAAU,CAACuB,WAAW,CAAC,CAChC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}